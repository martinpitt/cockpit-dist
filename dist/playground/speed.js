!function(e){var n={};function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(a,o,function(n){return e[n]}.bind(null,o));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=337)}({120:function(e,n,t){},28:function(e,n,t){},337:function(e,n,t){t(338),e.exports=t(339)},338:function(e,n,t){"use strict";t.r(n);var a,o=t(4),r=t.n(o),d=(t(28),t(120),t(54),null),i=null,l=null,c=null,s=0,u=null;function m(){var e=document.getElementById("speed");d||i?(e.innerHTML=r.a.format_bytes_per_sec(1e3*s/(Date.now()-c)),console.log(s)):e.innerHTML="";var n=document.getElementById("memory"),t=document.getElementById("pid");u||(u=r.a.script("echo $PPID && cat /proc/$PPID/statm")).then((function(e){var a=e.split("\n");t.innerHTML=a[0],n.innerHTML=a[1],u=null}),(function(e){n.innerHTML=String(e),u=null}))}function f(e){g();var n="echo-sideband"==e.target.id;var t=parseInt(document.getElementById("message").value,10),a=parseInt(document.getElementById("batch").value,10),o=parseInt(document.getElementById("interval").value,10);if(isNaN(t)||isNaN(o)||isNaN(a))window.alert("Bad value");else{var u=document.getElementById.checked,m={payload:"echo"},f=function(e,n){return n?new window.ArrayBuffer(e):new Array(e).join("x")}(t,u);if(c=new Date,s=0,n)u&&(m.binary="raw"),(i=new window.WebSocket(r.a.transport.uri("channel/"+r.a.transport.csrf_token)+"?"+window.btoa(JSON.stringify(m)))).binaryType="arraybuffer",i.onopen=function(){for(var e=0;e<a;e++)i.send(f);l=window.setInterval((function(){for(var e=0;e<a;e++)i.send(f)}),o)},i.onmessage=function(e){s+=u?e.data.byteLength:e.data.length},i.onclose=function(e){i&&window.alert("channel closed"),g()};else{u&&(m.binary=!0),(d=r.a.channel(m)).addEventListener("message",(function(e,n){s+=n.length})),d.addEventListener("close",(function(e,n){n.problem&&window.alert(n.problem),g()}));for(var p=0;p<a;p++)d.send(f);l=window.setInterval((function(){for(var e=0;e<a;e++)d.send(f)}),o)}}}function p(e){g();var n="read-sideband"==e.target.id,t={payload:"fsread1",path:document.getElementById("read-path").value,max_read_size:107374182400,binary:!n||"raw"};c=Date.now(),s=0,n?((i=new window.WebSocket(r.a.transport.uri("channel/"+r.a.transport.csrf_token)+"?"+window.btoa(JSON.stringify(t)))).binaryType="arraybuffer",i.onmessage=function(e){s+=e.data.byteLength},i.onclose=function(e){i&&window.alert("channel closed"),g()}):((d=r.a.channel(t)).addEventListener("message",(function(e,n){s+=n.length})),d.addEventListener("close",(function(e,n){n.problem&&window.alert(n.problem),g()})))}function w(e){g();var n,t=document.getElementById("download-path"),a={binary:"raw",max_read_size:107374182400,external:{"content-disposition":'attachment; filename="download"',"content-type":"application/octet-stream"}};0===t.value.indexOf("http")?((n=document.createElement("a")).href=t.value,a.payload="http-stream2",a.address=n.hostname,a.port=parseInt(n.port,10),a.path=n.pathname,a.method="GET"):(a.payload="fsread1",a.path=t.value),console.log("Download",a),c=Date.now(),s=0;var o=new URL(r.a.transport.uri("channel/"+r.a.transport.csrf_token)).pathname,d=window.btoa(JSON.stringify(a));window.open(o+"?"+d)}function y(){g(),document.getElementById("spawn-result").innerHTML="Running...";const e=document.getElementById("spawn-command").value;c=Date.now(),s=0,a="terminated",console.log("spawning",e),(d=r.a.script(e,{err:"message"})).stream((e=>{console.log("spawn: stream block length",e.length),s+=e.length,document.getElementById("spawn-output").innerHTML=e})),d.then((()=>{console.log("spawn: command finished successfully"),g(),document.getElementById("spawn-result").innerHTML="success"})),d.catch((e=>{console.log("spawn: command failed",JSON.stringify(e)),g(),document.getElementById("spawn-result").innerHTML=`failed with exit code ${e.exit_status}: ${e.message}`}))}function g(){m(),d&&d.close(a),d=null,a=void 0;var e=i;i=null,e&&e.close(),window.clearInterval(l),l=null}r.a.transport.wait((function(){document.getElementById("echo-normal").addEventListener("click",f),document.getElementById("echo-sideband").addEventListener("click",f),document.getElementById("read-normal").addEventListener("click",p),document.getElementById("read-sideband").addEventListener("click",p),document.getElementById("download-external").addEventListener("click",w),document.getElementById("spawn").addEventListener("click",y),document.getElementById("stop").addEventListener("click",g),window.setInterval(m,500),document.body.removeAttribute("hidden")}))},339:function(e,n,t){"use strict";t.r(n)},4:function(e,n){e.exports=cockpit},54:function(e,n,t){}});